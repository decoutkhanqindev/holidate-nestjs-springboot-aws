// File: components/PublicNavbar.tsx (PHI√äN B·∫¢N C√ì ƒêI·ªÄU KHI·ªÇN)
'use client';

import Link from 'next/link';
import { useAuth } from '@/contexts/AuthContext';

export default function PublicNavbar() {
    const { isLoggedIn, user, logout, openModal } = useAuth();

    return (
        <nav className="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top" style={{ height: '64px' }}>
            <div className="container">
                {/* S·ª≠a l·ªói g·∫°ch ch√¢n ·ªü logo */}
                <Link href="/" className="navbar-brand fw-bold fs-4 text-primary text-decoration-none">
                    Traveloka Clone
                </Link>

                <div className="ms-auto d-flex align-items-center">
                    <Link href="#" className="nav-link me-3 text-black fw-bold">Kh√°ch s·∫°n</Link>
                    <Link href="#" className="nav-link me-4 text-black fw-bold">H·ªó tr·ª£</Link>

                    {isLoggedIn && user ? (
                        // --- GIAO DI·ªÜN KHI ƒê√É ƒêƒÇNG NH·∫¨P ---
                        <div className="dropdown">
                            <button className="btn btn-outline-primary dropdown-toggle d-flex align-items-center" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                üë§ {user.name} | üí∞ {user.points} ƒêi·ªÉm
                            </button>
                            <ul className="dropdown-menu dropdown-menu-end">
                                <li><a className="dropdown-item" href="#">B·∫°n l√† th√†nh vi√™n Bronze</a></li>
                                <li><hr className="dropdown-divider" /></li>
                                <li><a className="dropdown-item" href="#">Ch·ªânh s·ª≠a h·ªì s∆°</a></li>
                                <li><a className="dropdown-item" href="#">ƒê·∫∑t ch·ªó c·ªßa t√¥i</a></li>
                                <li><a className="dropdown-item" href="#">Ho√†n ti·ªÅn</a></li>
                                <li><hr className="dropdown-divider" /></li>
                                <li><a className="dropdown-item" href="#" onClick={logout}>ƒêƒÉng xu·∫•t</a></li>
                            </ul>
                        </div>
                    ) : (
                        // --- GIAO DI·ªÜN KHI CH∆ØA ƒêƒÇNG NH·∫¨P ---
                        <div className="d-flex align-items-center">
                            <button onClick={openModal} className="btn btn-outline-primary me-2">
                                ƒêƒÉng nh·∫≠p
                            </button>
                            <button onClick={openModal} className="btn btn-primary">
                                ƒêƒÉng k√Ω
                            </button>
                        </div>
                    )}
                </div>
            </div>
        </nav>
    );
}