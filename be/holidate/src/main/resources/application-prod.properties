# ============================================
# PRODUCTION CONFIGURATION
# ============================================
# This file contains production-specific configuration for AWS EC2 deployment
# Activate with: --spring.profiles.active=prod
# ============================================

# Database Configuration (AWS RDS)
# Replace placeholders with actual values or use environment variables
spring.datasource.url=jdbc:mysql://holidate-db.c9owiuuash15.ap-southeast-1.rds.amazonaws.com:3306/holidate_db
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}

# HikariCP Connection Pool Configuration (Production optimized)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.connection-test-query=SELECT 1

# JPA Configuration (Production settings)
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.properties.hibernate.query.plan_cache_max_size=2048
spring.jpa.properties.hibernate.query.plan_parameter_metadata_max_size=128

# Frontend URL Configuration (Production)
# TEMPORARY FIX: Changed to localhost:3000 for CORS testing
# TODO: Change back to https://holidate.site after CORS issue is resolved
spring.security.oauth2.client.frontend-url=http://localhost:3000

# Backend URL Configuration (Production)
spring.security.oauth2.client.backend-url=https://api.holidate.site

# Thymeleaf Configuration (Production - enable cache)
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.cache=true

# Server Configuration
# Note: Keep port 8080 for internal EC2 use (Nginx/ALB will handle external routing)
server.port=8080

# ============================================
# All other configuration values should be provided via environment variables:
# - AWS S3 credentials (AWS_S3_ACCESS_KEY, AWS_S3_SECRET_KEY, etc.)
# - JWT configuration (JWT_SECRET_KEY, JWT_ISSUER, etc.)
# - Mail configuration (MAIL_HOST, MAIL_USERNAME, etc.)
# - OTP configuration (OTP_EXPIRATION_MILLIS, etc.)
# - Google OAuth2 (GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)
# - VNPay configuration (VNPAY_TMN_CODE, etc.)
# - Admin credentials (ADMIN_EMAIL, ADMIN_PASSWORD, etc.)
# ============================================

