# Architecture Diagrams - Google Drive Sync System

## ğŸ“Š Visualization Guide

This document provides detailed architectural diagrams for the Holidate Knowledge Base system using **Google Drive Sync** approach.

---

## 1. High-Level System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              HOLIDATE PLATFORM                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                   â”‚                   â”‚
                    â–¼                   â–¼                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Admin Panel    â”‚  â”‚  Partner Portal  â”‚  â”‚   User Frontend  â”‚
        â”‚   (React)        â”‚  â”‚   (React)        â”‚  â”‚   (Next.js)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                   â”‚                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   Spring Boot API     â”‚
                            â”‚   (REST Endpoints)    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                       â”‚                       â”‚
                â–¼                       â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   MySQL Database    â”‚ â”‚   AWS S3 Storage    â”‚ â”‚ KB Generator Module â”‚ â—„â”€â”€ Focus
    â”‚   (Hotel/Room/...)  â”‚ â”‚   (Images/Files)    â”‚ â”‚   (This System)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                â”‚
                                                                â–¼
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚   Google Drive      â”‚
                                                    â”‚   (Knowledge Base)  â”‚
                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                â”‚
                                                                â–¼
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚   n8n Automation    â”‚
                                                    â”‚   (Vector Indexing) â”‚
                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                â”‚
                                                                â–¼
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚   Pinecone VectorDB â”‚
                                                    â”‚   (Search Engine)   â”‚
                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                â”‚
                                                                â–¼
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚   AI Chatbot        â”‚
                                                    â”‚   (User Interface)  â”‚
                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Knowledge Base Generator - Detailed Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SPRING BOOT - KB GENERATOR MODULE                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  TRIGGER: Manual / Scheduled / Event-Driven                           â”‚
    â”‚  - CommandLineRunner (manual)                                         â”‚
    â”‚  - @Scheduled cron (weekly/hourly)                                    â”‚
    â”‚  - @EventListener (hotel updated/created)                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PHASE 1: DATA EXTRACTION                                              â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚  KnowledgeBaseRepository.findAllActiveHotels()                   â”‚ â”‚
    â”‚  â”‚  â”œâ”€ JOIN hotels, rooms, amenities, policies                      â”‚ â”‚
    â”‚  â”‚  â”œâ”€ JOIN location hierarchy (countryâ†’provinceâ†’cityâ†’district)     â”‚ â”‚
    â”‚  â”‚  â”œâ”€ JOIN entertainment_venues, reviews                           â”‚ â”‚
    â”‚  â”‚  â””â”€ WHERE status = 'active'                                      â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                              â†“                                         â”‚
    â”‚                   [ Entity: Hotel object ]                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PHASE 2: TRANSFORMATION                                               â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚  KnowledgeBaseGenerationService.buildHotelKB()                   â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Map Entity â†’ HotelKnowledgeBaseDto                           â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Calculate reference_min_price (MIN room price)               â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Infer vibe_tags (luxury/romantic/family...)                  â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Generate location_tags (nearby landmarks)                    â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Map amenities â†’ English tags                                 â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Calculate distance to entertainment venues                   â”‚ â”‚
    â”‚  â”‚  â””â”€ Aggregate review stats                                       â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                              â†“                                         â”‚
    â”‚                [ DTO: HotelKnowledgeBaseDto ]                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PHASE 3: MARKDOWN GENERATION                                          â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚  KnowledgeBaseUploadService.generateMarkdown()                   â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Load Mustache template (template_hotel_profile.md)           â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Build context map from DTO                                   â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Inject data: {{name}}, {{description}}, {{amenities}}        â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Render YAML frontmatter                                      â”‚ â”‚
    â”‚  â”‚  â””â”€ Render markdown body (Vietnamese text)                       â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                              â†“                                         â”‚
    â”‚                  [ String: Markdown content ]                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PHASE 4: GOOGLE DRIVE SYNC                                            â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚  GoogleDriveService.uploadOrUpdateMarkdown()                     â”‚ â”‚
    â”‚  â”‚                                                                   â”‚ â”‚
    â”‚  â”‚  Step 1: Parse path                                              â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Input: "vietnam/da-nang/son-tra/hotels/grand-mercure.md"    â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Extract: fileName = "grand-mercure.md"                       â”‚ â”‚
    â”‚  â”‚  â””â”€ Extract: folderPath = "vietnam/da-nang/son-tra/hotels"      â”‚ â”‚
    â”‚  â”‚                                                                   â”‚ â”‚
    â”‚  â”‚  Step 2: Ensure folder structure exists                          â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Check cache: folderCache.get("vietnam/da-nang/son-tra...")  â”‚ â”‚
    â”‚  â”‚  â”œâ”€ If not in cache, query Drive API                            â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Create folders recursively if needed                         â”‚ â”‚
    â”‚  â”‚  â””â”€ Cache folder IDs for next time                               â”‚ â”‚
    â”‚  â”‚                                                                   â”‚ â”‚
    â”‚  â”‚  Step 3: Check if file exists                                    â”‚ â”‚
    â”‚  â”‚  â”œâ”€ Query: "name='grand-mercure.md' AND parent='{folderId}'"    â”‚ â”‚
    â”‚  â”‚  â”œâ”€ If exists â†’ Get file ID                                      â”‚ â”‚
    â”‚  â”‚  â””â”€ If not exists â†’ file ID = null                               â”‚ â”‚
    â”‚  â”‚                                                                   â”‚ â”‚
    â”‚  â”‚  Step 4: Upload or Update                                        â”‚ â”‚
    â”‚  â”‚  â”œâ”€ IF file ID exists:                                           â”‚ â”‚
    â”‚  â”‚  â”‚   â””â”€ Drive.files().update(fileId, newContent)                 â”‚ â”‚
    â”‚  â”‚  â”œâ”€ ELSE:                                                        â”‚ â”‚
    â”‚  â”‚  â”‚   â””â”€ Drive.files().create(metadata, content)                  â”‚ â”‚
    â”‚  â”‚  â””â”€ Return: Google Drive file ID                                 â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                              â†“                                         â”‚
    â”‚       [ Output: File on Google Drive with unique ID ]                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ âœ“ Backend job done!
                                    â”‚ n8n takes over from here
                                    â–¼
                        [ Google Drive File Created/Updated ]
```

---

## 3. Google Drive Folder Structure

```
ğŸ“ knowledge_base/                          (Root Folder ID configured in app.properties)
â”‚
â”œâ”€â”€ ğŸ“ metadata/                            (Config files)
â”‚   â”œâ”€â”€ ğŸ“„ schema.json
â”‚   â”œâ”€â”€ ğŸ“„ vibe_mapping.yaml
â”‚   â””â”€â”€ ğŸ“„ amenity_en_vi_mapping.json
â”‚
â”œâ”€â”€ ğŸ“ vietnam/                             (Country level)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ da-nang/                         (City: ÄÃ  Náºµng)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ son-tra/                     (District: Quáº­n SÆ¡n TrÃ )
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ hotels/                  (Hotel files)
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ grand-mercure-danang.md           â† Generated by Backend
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ pullman-danang-beach-resort.md   â† Generated by Backend
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ furama-resort-danang.md          â† Generated by Backend
â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ vinpearl-resort-spa-danang.md    â† Generated by Backend
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ hai-chau/                    (District: Quáº­n Háº£i ChÃ¢u)
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ hotels/
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ novotel-danang-premier.md
â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ brilliant-hotel.md
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“ ngu-hanh-son/                (District: NgÅ© HÃ nh SÆ¡n)
â”‚   â”‚       â””â”€â”€ ğŸ“ hotels/
â”‚   â”‚           â””â”€â”€ ğŸ“„ vinpearl-marble-mountains.md
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ nha-trang/                       (City: Nha Trang)
â”‚   â”‚   â””â”€â”€ ğŸ“ nha-trang-city/
â”‚   â”‚       â””â”€â”€ ğŸ“ hotels/
â”‚   â”‚           â”œâ”€â”€ ğŸ“„ sheraton-nha-trang.md
â”‚   â”‚           â””â”€â”€ ğŸ“„ mia-resort-nha-trang.md
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ ho-chi-minh/                     (City: TP HCM)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ quan-1/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ hotels/
â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ park-hyatt-saigon.md
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“ quan-3/
â”‚   â”‚       â””â”€â”€ ğŸ“ hotels/
â”‚   â”‚           â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ ha-noi/                          (City: HÃ  Ná»™i)
â”‚       â”œâ”€â”€ ğŸ“ hoan-kiem/
â”‚       â””â”€â”€ ğŸ“ tay-ho/
â”‚
â”œâ”€â”€ ğŸ“ collections/                         (Curated lists)
â”‚   â”œâ”€â”€ ğŸ“„ romantic-getaways.md
â”‚   â”œâ”€â”€ ğŸ“„ luxury-5star-escapes.md
â”‚   â””â”€â”€ ğŸ“„ budget-stays-under-1m.md
â”‚
â””â”€â”€ ğŸ“ faqs/                                (Common questions)
    â”œâ”€â”€ ğŸ“„ booking-policies.md
    â””â”€â”€ ğŸ“„ cancellation-guide.md


ğŸ” How Backend Finds/Creates Folders:

1. Start from root: rootFolderId (from config)
2. Split path: "vietnam/da-nang/son-tra/hotels"
3. Loop through each segment:
   a. Check cache: folderCache.get("vietnam")
   b. If not cached, query Drive: "name='vietnam' AND parent='{rootId}'"
   c. If not found, create: Drive.files().create(folderMetadata)
   d. Cache result: folderCache.put("vietnam", folderId)
4. Return final folder ID for "hotels"
```

---

## 4. n8n Workflow - Detailed Steps

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              n8n WORKFLOW AUTOMATION                                 â”‚
â”‚                           (Runs outside Spring Boot Backend)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  NODE 1: Google Drive Trigger                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚  Type: Webhook Trigger (watches folder changes)                 â”‚  â”‚
    â”‚  â”‚  Config:                                                         â”‚  â”‚
    â”‚  â”‚  â”œâ”€ Folder ID: {knowledge_base_root_folder_id}                  â”‚  â”‚
    â”‚  â”‚  â”œâ”€ Events: ["file.created", "file.updated"]                    â”‚  â”‚
    â”‚  â”‚  â”œâ”€ Recursive: true (watch all subfolders)                      â”‚  â”‚
    â”‚  â”‚  â””â”€ File type filter: .md (markdown only)                       â”‚  â”‚
    â”‚  â”‚                                                                  â”‚  â”‚
    â”‚  â”‚  Output:                                                         â”‚  â”‚
    â”‚  â”‚  {                                                               â”‚  â”‚
    â”‚  â”‚    "id": "1A2B3C4D5E6F...",        // Google Drive file ID      â”‚  â”‚
    â”‚  â”‚    "name": "grand-mercure.md",                                  â”‚  â”‚
    â”‚  â”‚    "mimeType": "text/markdown",                                 â”‚  â”‚
    â”‚  â”‚    "modifiedTime": "2025-11-23T14:30:00Z"                       â”‚  â”‚
    â”‚  â”‚  }                                                               â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  NODE 2: Download File Content                                        â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚  Type: Google Drive - Download File                             â”‚  â”‚
    â”‚  â”‚  Input: {{ $json.id }} (file ID from trigger)                   â”‚  â”‚
    â”‚  â”‚                                                                  â”‚  â”‚
    â”‚  â”‚  Output:                                                         â”‚  â”‚
    â”‚  â”‚  {                                                               â”‚  â”‚
    â”‚  â”‚    "data": "---\ndoc_id: abc-123\n---\n# Hotel Name\n..."       â”‚  â”‚
    â”‚  â”‚  }                                                               â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  NODE 3: Parse Markdown (Code Node)                                   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚  Type: JavaScript Code                                           â”‚  â”‚
    â”‚  â”‚  Logic:                                                          â”‚  â”‚
    â”‚  â”‚  ```javascript                                                   â”‚  â”‚
    â”‚  â”‚  const yaml = require('js-yaml');                                â”‚  â”‚
    â”‚  â”‚  const content = $input.item.json.data;                          â”‚  â”‚
    â”‚  â”‚                                                                  â”‚  â”‚
    â”‚  â”‚  // Split frontmatter and body                                  â”‚  â”‚
    â”‚  â”‚  const parts = content.split('---');                            â”‚  â”‚
    â”‚  â”‚  const frontmatter = yaml.load(parts[1]);                       â”‚  â”‚
    â”‚  â”‚  const body = parts.slice(2).join('---').trim();                â”‚  â”‚
    â”‚  â”‚                                                                  â”‚  â”‚
    â”‚  â”‚  return {                                                        â”‚  â”‚
    â”‚  â”‚    json: {                                                       â”‚  â”‚
    â”‚  â”‚      doc_id: frontmatter.doc_id,                                â”‚  â”‚
    â”‚  â”‚      metadata: frontmatter,  // Full YAML object                â”‚  â”‚
    â”‚  â”‚      content: body            // Markdown text only             â”‚  â”‚
    â”‚  â”‚    }                                                             â”‚  â”‚
    â”‚  â”‚  };                                                              â”‚  â”‚
    â”‚  â”‚  ```                                                             â”‚  â”‚
    â”‚  â”‚                                                                  â”‚  â”‚
    â”‚  â”‚  Output:                                                         â”‚  â”‚
    â”‚  â”‚  {                                                               â”‚  â”‚
    â”‚  â”‚    "doc_id": "00d60e60-d366-4d73-b3c0-614ecb95feb7",            â”‚  â”‚
    â”‚  â”‚    "metadata": {                                                 â”‚  â”‚
    â”‚  â”‚      "doc_type": "hotel_profile",                               â”‚  â”‚
    â”‚  â”‚      "star_rating": 5,                                           â”‚  â”‚
    â”‚  â”‚      "amenity_tags": ["pool", "spa", ...],                      â”‚  â”‚
    â”‚  â”‚      "location": { "city": "da-nang", ... }                     â”‚  â”‚
    â”‚  â”‚    },                                                            â”‚  â”‚
    â”‚  â”‚    "content": "# Grand Mercure Danang\n\n## Giá»›i Thiá»‡u\n..."    â”‚  â”‚
    â”‚  â”‚  }                                                               â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  NODE 4: Generate Embedding                                           â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚  Type: OpenAI - Create Embedding                                 â”‚  â”‚
    â”‚  â”‚  Config:                                                         â”‚  â”‚
    â”‚  â”‚  â”œâ”€ Model: "text-embedding-3-small" (1536 dimensions)            â”‚  â”‚
    â”‚  â”‚  â”‚    OR: "text-embedding-3-large" (3072 dimensions)             â”‚  â”‚
    â”‚  â”‚  â”‚    OR: PhoBERT (for Vietnamese optimization)                  â”‚  â”‚
    â”‚  â”‚  â””â”€ Input: {{ $json.content }}                                   â”‚  â”‚
    â”‚  â”‚                                                                  â”‚  â”‚
    â”‚  â”‚  API Call:                                                       â”‚  â”‚
    â”‚  â”‚  POST https://api.openai.com/v1/embeddings                      â”‚  â”‚
    â”‚  â”‚  {                                                               â”‚  â”‚
    â”‚  â”‚    "model": "text-embedding-3-small",                           â”‚  â”‚
    â”‚  â”‚    "input": "# Grand Mercure Danang\n\n## Giá»›i Thiá»‡u\n..."     â”‚  â”‚
    â”‚  â”‚  }                                                               â”‚  â”‚
    â”‚  â”‚                                                                  â”‚  â”‚
    â”‚  â”‚  Output:                                                         â”‚  â”‚
    â”‚  â”‚  {                                                               â”‚  â”‚
    â”‚  â”‚    "embedding": [0.0234, -0.0123, 0.0567, ..., 0.0421]          â”‚  â”‚
    â”‚  â”‚    // Array of 1536 floats                                      â”‚  â”‚
    â”‚  â”‚  }                                                               â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  NODE 5: Upsert to Vector Database                                    â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚  Type: Pinecone - Upsert Vector                                  â”‚  â”‚
    â”‚  â”‚  Config:                                                         â”‚  â”‚
    â”‚  â”‚  â”œâ”€ Index: "holidate-knowledge-base"                             â”‚  â”‚
    â”‚  â”‚  â”œâ”€ Namespace: "hotels" (or "rooms", "faqs")                     â”‚  â”‚
    â”‚  â”‚  â””â”€ Operation: UPSERT (insert or update)                         â”‚  â”‚
    â”‚  â”‚                                                                  â”‚  â”‚
    â”‚  â”‚  Request:                                                        â”‚  â”‚
    â”‚  â”‚  {                                                               â”‚  â”‚
    â”‚  â”‚    "vectors": [{                                                 â”‚  â”‚
    â”‚  â”‚      "id": "00d60e60-d366-4d73-b3c0-614ecb95feb7",              â”‚  â”‚
    â”‚  â”‚      "values": [0.0234, -0.0123, ..., 0.0421],                  â”‚  â”‚
    â”‚  â”‚      "metadata": {                                               â”‚  â”‚
    â”‚  â”‚        "doc_type": "hotel_profile",                             â”‚  â”‚
    â”‚  â”‚        "slug": "grand-mercure-danang",                          â”‚  â”‚
    â”‚  â”‚        "name": "Grand Mercure Danang",                          â”‚  â”‚
    â”‚  â”‚        "star_rating": 5,                                         â”‚  â”‚
    â”‚  â”‚        "city": "da-nang",                                        â”‚  â”‚
    â”‚  â”‚        "district": "son-tra",                                    â”‚  â”‚
    â”‚  â”‚        "amenity_tags": "pool,spa,gym,restaurant",               â”‚  â”‚
    â”‚  â”‚        "vibe_tags": "luxury,romantic,family_friendly",          â”‚  â”‚
    â”‚  â”‚        "reference_min_price": 1445000,                          â”‚  â”‚
    â”‚  â”‚        "drive_file_id": "1A2B3C4D5E6F...",                      â”‚  â”‚
    â”‚  â”‚        "updated_at": "2025-11-23T14:30:00Z"                     â”‚  â”‚
    â”‚  â”‚      }                                                           â”‚  â”‚
    â”‚  â”‚    }]                                                            â”‚  â”‚
    â”‚  â”‚  }                                                               â”‚  â”‚
    â”‚  â”‚                                                                  â”‚  â”‚
    â”‚  â”‚  âœ“ If vector with same ID exists â†’ UPDATE                       â”‚  â”‚
    â”‚  â”‚  âœ“ If new ID â†’ INSERT                                           â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  NODE 6: Success Notification (Optional)                              â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚  Type: Slack / Discord / Email                                   â”‚  â”‚
    â”‚  â”‚  Message:                                                        â”‚  â”‚
    â”‚  â”‚  "âœ“ Indexed: grand-mercure-danang.md                            â”‚  â”‚
    â”‚  â”‚   Hotel: Grand Mercure Danang                                   â”‚  â”‚
    â”‚  â”‚   City: ÄÃ  Náºµng                                                 â”‚  â”‚
    â”‚  â”‚   Star: â­â­â­â­â­                                                â”‚  â”‚
    â”‚  â”‚   Price: 1.445.000 VNÄ                                          â”‚  â”‚
    â”‚  â”‚   Timestamp: 2025-11-23 14:30:00"                               â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                            âœ“ WORKFLOW COMPLETE
                     Vector ready for search queries!
```

---

## 5. End-to-End Flow with Timeline

```
TIME    COMPONENT           ACTION                                  OUTPUT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

00:00   Admin Panel         Partner updates hotel description
        â”‚
        â””â”€â”€â†’ HTTP POST /api/v1/hotels/{id}
                                                                    200 OK

00:01   Spring Boot         @EventListener catches HotelUpdatedEvent
        â”‚
        â”œâ”€â”€â†’ KnowledgeBaseRepository.findById(hotelId)
        â”‚                                                           Hotel entity
        â”‚
        â”œâ”€â”€â†’ KnowledgeBaseGenerationService.buildHotelKB()
        â”‚                                                           HotelKBDto
        â”‚
        â”œâ”€â”€â†’ KnowledgeBaseUploadService.generateMarkdown()
        â”‚                                                           String (markdown)
        â”‚
        â””â”€â”€â†’ GoogleDriveService.uploadOrUpdateMarkdown()
             â”‚
             â”œâ”€ Step 1: Parse path
             â”œâ”€ Step 2: Ensure folders exist
             â”œâ”€ Step 3: Check if file exists
             â””â”€ Step 4: Update file content
                                                                    Drive file ID

00:02   Google Drive        File updated on Drive
        â”‚                   Webhook fires: "file.updated"
        â”‚
        â””â”€â”€â†’ Triggers n8n workflow

00:03   n8n                 Node 1: Receives webhook
        â”‚                   
        â”œâ”€â”€â†’ Node 2: Downloads file from Drive
        â”‚                                                           Markdown content
        â”‚
        â”œâ”€â”€â†’ Node 3: Parses frontmatter + body
        â”‚                                                           JSON object
        â”‚
        â”œâ”€â”€â†’ Node 4: Calls OpenAI API
        â”‚    POST https://api.openai.com/v1/embeddings
        â”‚                                                           Vector [1536 floats]
        â”‚
        â”œâ”€â”€â†’ Node 5: Upserts to Pinecone
        â”‚    POST https://api.pinecone.io/vectors/upsert
        â”‚                                                           Success response
        â”‚
        â””â”€â”€â†’ Node 6: Sends Slack notification
                                                                    "âœ“ Indexed"

00:04   AI Chatbot          User asks: "KhÃ¡ch sáº¡n 5 sao cÃ³ spa gáº§n biá»ƒn ÄÃ  Náºµng"
        â”‚
        â”œâ”€â”€â†’ Convert query to embedding
        â”‚                                                           Query vector
        â”‚
        â”œâ”€â”€â†’ Search Pinecone (vector similarity + metadata filter)
        â”‚    WHERE city='da-nang' AND star_rating=5 
        â”‚    AND 'spa' IN amenity_tags
        â”‚                                                           Top 5 results
        â”‚
        â”œâ”€â”€â†’ Retrieve full markdown from cache/Drive
        â”‚                                                           Hotel descriptions
        â”‚
        â””â”€â”€â†’ LLM generates response with context
                                                                    Conversational answer

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Total latency: 
- Backend processing: 1-2 seconds
- Drive sync: < 1 second
- n8n processing: 2-3 seconds (depends on OpenAI API)
- Total: ~5 seconds from update to searchable
```

---

## 6. Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            ERROR HANDLING STRATEGIES                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SCENARIO 1: Google Drive API Quota Exceeded
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Backend:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  GoogleDriveService                 â”‚
  â”‚  â”œâ”€ Catch: UserRateLimitException   â”‚
  â”‚  â”œâ”€ Log: "Drive quota exceeded"     â”‚
  â”‚  â”œâ”€ Wait: Exponential backoff       â”‚
  â”‚  â””â”€ Retry: 3 attempts max           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â””â”€â”€â†’ If all retries fail:
                â”œâ”€ Mark hotel as "pending_sync"
                â””â”€ Schedule retry in next batch


SCENARIO 2: n8n Workflow Fails (OpenAI API Down)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
n8n:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Workflow Error Handling                    â”‚
  â”‚  â”œâ”€ Node "Error Trigger" catches failure    â”‚
  â”‚  â”œâ”€ Log error details to database           â”‚
  â”‚  â”œâ”€ Move file to "failed_processing" folder â”‚
  â”‚  â””â”€ Send alert to Slack                     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â””â”€â”€â†’ Manual Review:
                Admin checks error log
                Re-triggers workflow when API is back


SCENARIO 3: File Already Exists but ID Lost
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Backend:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  GoogleDriveService.uploadOrUpdateMarkdown()        â”‚
  â”‚  â”œâ”€ findFileByName() returns multiple results       â”‚
  â”‚  â”œâ”€ Filter: Get most recently modified              â”‚
  â”‚  â”œâ”€ Update that file                                â”‚
  â”‚  â””â”€ Delete duplicates                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


SCENARIO 4: Folder Cache Out of Sync
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Backend:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  GoogleDriveService                         â”‚
  â”‚  â”œâ”€ Cache returns folder ID                 â”‚
  â”‚  â”œâ”€ Drive API returns "Folder not found"    â”‚
  â”‚  â”‚   (Someone deleted it manually)          â”‚
  â”‚  â”œâ”€ Clear cache for that path               â”‚
  â”‚  â”œâ”€ Re-query Drive API                      â”‚
  â”‚  â””â”€ Recreate folder structure               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


SCENARIO 5: Markdown Generation Fails (Missing Data)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Backend:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  KnowledgeBaseUploadService                         â”‚
  â”‚  â”œâ”€ Catch: NullPointerException in template        â”‚
  â”‚  â”œâ”€ Log: "Hotel {id} missing required field: city" â”‚
  â”‚  â”œâ”€ Skip this hotel                                 â”‚
  â”‚  â””â”€ Continue with next hotel                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â””â”€â”€â†’ Weekly report:
                "Hotels with incomplete data: [list]"
```

---

## 7. Data Consistency Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATA CONSISTENCY MECHANISMS                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PROBLEM: Hotel is deleted from database, but markdown still exists on Drive

SOLUTION: Status-Based Soft Delete
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Database:
  Hotel.status = 'inactive'  (instead of DELETE)

Backend:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  @EventListener(HotelDeactivatedEvent)      â”‚
  â”‚  â”œâ”€ Generate markdown with status=inactive  â”‚
  â”‚  â””â”€ Upload to Drive (overwrites active file)â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

n8n:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Workflow: Check status in frontmatter         â”‚
  â”‚  IF metadata.status == 'inactive':             â”‚
  â”‚    â”œâ”€ DELETE vector from Pinecone              â”‚
  â”‚    â””â”€ Move .md file to "_archive" folder       â”‚
  â”‚  ELSE:                                         â”‚
  â”‚    â””â”€ Process normally (upsert to Pinecone)    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


PROBLEM: Price updated in DB, but markdown shows old price

SOLUTION: Reference Price Disclaimer
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Markdown:
  "ğŸ’° GiÃ¡ tham kháº£o: Tá»« 1.445.000 VNÄ/Ä‘Ãªm"
  âš ï¸ Disclaimer: "GiÃ¡ thá»±c táº¿ thay Ä‘á»•i theo ngÃ y"
  {{TOOL:check_availability}} â† Always calls live API

Weekly Batch:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  @Scheduled(cron = "0 0 2 * * SUN")       â”‚
  â”‚  â”œâ”€ Regenerate ALL hotel profiles         â”‚
  â”‚  â””â”€ Ensures prices sync weekly            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


PROBLEM: New amenity added to hotel, but not in markdown

SOLUTION: Event-Driven Incremental Update
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Database:
  INSERT INTO hotel_amenities (hotel_id, amenity_id)
  
Backend:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  @EventListener(HotelAmenityAddedEvent)     â”‚
  â”‚  â”œâ”€ Fetch updated hotel entity              â”‚
  â”‚  â”œâ”€ Regenerate markdown                     â”‚
  â”‚  â””â”€ Upload to Drive (triggers n8n)          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

n8n:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Detects file update â†’ Re-generates embeddingâ”‚
  â”‚  Updates Pinecone with new amenity tags     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Scalability Analysis

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              SCALABILITY METRICS                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SCENARIO: 10,000 Hotels with 5 rooms each = 50,000 markdown files

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Component            Bottleneck         Limit           Solution     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MySQL Database       Query speed        ~1000 QPS      Add indexes  â”‚
â”‚                                                          Read replicas â”‚
â”‚                                                                        â”‚
â”‚  Spring Boot          Memory usage       Heap size      Batch processâ”‚
â”‚                                                          Pagination    â”‚
â”‚                                                                        â”‚
â”‚  Google Drive API     Rate limit         20,000/day     Implement    â”‚
â”‚                                          (per project)   rate limiter â”‚
â”‚                                                          Use batch API â”‚
â”‚                                                                        â”‚
â”‚  Google Drive Storage File count         Unlimited      No issue     â”‚
â”‚                       Storage size       15 GB (free)   Upgrade plan â”‚
â”‚                                                                        â”‚
â”‚  n8n Workflow         Execution time     60 sec/exec    Split to     â”‚
â”‚                                          (default)      sub-workflowsâ”‚
â”‚                                                                        â”‚
â”‚  OpenAI API           RPM (Requests)     3,500/min      Implement    â”‚
â”‚                       TPM (Tokens)       200,000/min    queue system â”‚
â”‚                                                                        â”‚
â”‚  Pinecone             Vector count       100K (free)    Upgrade plan â”‚
â”‚                       QPS                100 (free)     Caching layerâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RECOMMENDED ARCHITECTURE FOR SCALE:

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Spring Boot (Multiple Instances)                               â”‚
  â”‚  â”œâ”€ Instance 1: Handles API requests                            â”‚
  â”‚  â”œâ”€ Instance 2: Dedicated for KB generation (cron jobs)         â”‚
  â”‚  â””â”€ Instance 3: Event-driven updates (via message queue)        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Message Queue  â”‚
                    â”‚  (RabbitMQ/SQS) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚               â”‚               â”‚
              â–¼               â–¼               â–¼
       [Worker 1]      [Worker 2]      [Worker 3]
       Generate MD     Upload Drive    Update Vector
```

---

## 9. Monitoring Dashboard (Recommended Metrics)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          GRAFANA DASHBOARD LAYOUT                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  KNOWLEDGE BASE GENERATION METRICS                      [Last 24 Hours]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Hotels Processed    â”‚  â”‚  Success Rate        â”‚  â”‚  Avg Process    â”‚ â”‚
â”‚  â”‚      1,234           â”‚  â”‚      98.5%           â”‚  â”‚  Time: 1.2s     â”‚ â”‚
â”‚  â”‚  â–² +45 from yesterdayâ”‚  â”‚  ğŸŸ¢ Normal           â”‚  â”‚  â–¼ -0.3s        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Generation Timeline (Hotels per hour)                             â”‚   â”‚
â”‚  â”‚  â”ƒ                                                                 â”‚   â”‚
â”‚  â”‚  â”ƒ          â–„â–„                                                     â”‚   â”‚
â”‚  â”‚  â”ƒ    â–„â–„   â–ˆâ–ˆâ–ˆâ–ˆ   â–„â–„                                              â”‚   â”‚
â”‚  â”‚  â”ƒ   â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ  â–„â–„                                         â”‚   â”‚
â”‚  â”‚  â”ƒ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                      â”‚   â”‚
â”‚  â”‚  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚   â”‚
â”‚  â”‚    00  04  08  12  16  20  24                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Google Drive API Usage                                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ Requests today: 12,456 / 20,000  (62%)                         â”‚   â”‚
â”‚  â”‚  â”œâ”€ Folder creates: 234                                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ File uploads: 1,234                                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ File updates: 567                                              â”‚   â”‚
â”‚  â”‚  â””â”€ Cache hit rate: 87%  ğŸŸ¢                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  n8n Workflow Executions                                           â”‚   â”‚
â”‚  â”‚  â”œâ”€ Total: 1,801                                                   â”‚   â”‚
â”‚  â”‚  â”œâ”€ Success: 1,789  (99.3%)  ğŸŸ¢                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ Failed: 12                                                     â”‚   â”‚
â”‚  â”‚  â””â”€ Avg duration: 2.8s                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Error Rate           â”‚  â”‚  Recent Errors                         â”‚   â”‚
â”‚  â”‚  Last hour: 0.5%      â”‚  â”‚  â”œâ”€ Drive quota (2)                    â”‚   â”‚
â”‚  â”‚  ğŸŸ¢ Below threshold    â”‚  â”‚  â”œâ”€ Missing city (5)                  â”‚   â”‚
â”‚  â”‚                       â”‚  â”‚  â””â”€ Template render (1)                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Alerts Configuration:
  ğŸ”´ Critical: Success rate < 90%
  ğŸŸ¡ Warning:  Processing time > 5s
  ğŸ”´ Critical: Drive quota > 90%
  ğŸŸ¡ Warning:  n8n failure rate > 5%
```

---

## 10. Comparison: Before vs After Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              OLD ARCHITECTURE (Direct Vector DB)  vs  NEW (Google Drive Sync)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

OLD APPROACH: Backend â†’ Vector DB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Backend
  â”œâ”€ Generate markdown
  â”œâ”€ Generate embedding (OpenAI API call)
  â”œâ”€ Upsert to Pinecone
  â””â”€ Manage error handling

âŒ Problems:
  â”œâ”€ Backend tightly coupled to OpenAI + Pinecone
  â”œâ”€ Changing embedding model = Code changes + Redeploy
  â”œâ”€ No audit trail of what was indexed
  â”œâ”€ Hard to debug embedding issues
  â””â”€ Backend must handle rate limits of 2 external services


NEW APPROACH: Backend â†’ Drive â†’ n8n â†’ Vector DB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Backend
  â”œâ”€ Generate markdown
  â””â”€ Upload to Google Drive  â† Backend stops here

n8n (Visual Workflow)
  â”œâ”€ Watch Drive changes
  â”œâ”€ Parse markdown
  â”œâ”€ Generate embedding
  â””â”€ Upsert to Pinecone

âœ… Benefits:
  â”œâ”€ Backend only deals with data transformation
  â”œâ”€ n8n provides visual debugging (see data at each step)
  â”œâ”€ Change embedding model in UI (no code change)
  â”œâ”€ Swap Pinecone â†’ Weaviate in 1 click
  â”œâ”€ Markdown files = audit trail on Drive
  â”œâ”€ Can manually fix files and re-trigger workflow
  â”œâ”€ Non-technical users can modify workflows
  â””â”€ Better separation of concerns


SIDE-BY-SIDE COMPARISON:

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Aspect                    â•‘  Old (Direct)         â•‘  New (Drive Sync)     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Backend Complexity        â•‘  High                 â•‘  Low                  â•‘
â•‘  Code to maintain          â•‘  More                 â•‘  Less                 â•‘
â•‘  Change embedding model    â•‘  Code + Redeploy      â•‘  UI click             â•‘
â•‘  Change vector DB          â•‘  Code + Redeploy      â•‘  Swap n8n node        â•‘
â•‘  Debugging                 â•‘  Logs only            â•‘  Visual + Logs        â•‘
â•‘  Audit trail               â•‘  Database only        â•‘  Drive + DB           â•‘
â•‘  Manual intervention       â•‘  Hard                 â•‘  Easy (edit .md)      â•‘
â•‘  Non-technical users       â•‘  Can't help           â•‘  Can modify workflow  â•‘
â•‘  Error recovery            â•‘  Retry in code        â•‘  Re-trigger workflow  â•‘
â•‘  Cost of failure           â•‘  Redeploy required    â•‘  Fix & retry          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

**File Complete!** ğŸ‰

These diagrams should give you and your team a complete visual understanding of the new Google Drive Sync architecture!