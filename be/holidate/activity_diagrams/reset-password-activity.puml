@startuml
|Người dùng|
start
:Truy cập trang đặt lại mật khẩu;
:Nhập email;
:Nhấn nút "Gửi mã OTP";

|Hệ thống|
:Kiểm tra email trong CSDL;

if (Tài khoản không tồn tại?) then (Có)
  :Thông báo lỗi\ntài khoản không tồn tại;
  |Người dùng|
  -> Nhập lại email;
else (Tồn tại)
  |Hệ thống|
  :Tạo mã OTP;
  :Gửi email chứa mã OTP\nđến người dùng;

  |Người dùng|
  :Nhập mã OTP và mật khẩu mới;

  |Hệ thống|
  :Xác thực mã OTP;

  if (Mã OTP hợp lệ?) then (Không)
    :Thông báo lỗi\nmã OTP không đúng;
    |Người dùng|
    -> Nhập lại mã OTP;
  else (Có)
    |Hệ thống|
    :Cập nhật mật khẩu mới;
    :Thông báo đặt lại mật khẩu thành công;
  endif
endif

stop
@enduml
